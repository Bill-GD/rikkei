<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript: Session 5 - Rikkei</title>
  </head>
  <body>
    <button onclick="searchObject()">Search object by property</button>
    <br>
    <button onclick="sortByCost()">Sort objects by property</button>
    <br>
    <p>
      <span>Result printed down here</span>
      <button onclick="clearCanvas()">Clear</button>
    </p>
    <section id="print-canvas"></section>
  </body>
  <script>
    // find obj in array by member/property
    // sort products by price
    // get user data -> validate -> re-enter if needed
    // signup & signin (with objects), can end
    const chars = String.fromCharCode(
        ...Array.from({ length: 26 }, (_, i) => i + 65)
        .concat(Array.from({ length: 26 }, (_, i) => i + 97))
        .concat(Array.from({ length: 10 }, (_, i) => i + 48)),
    );

    function searchObject() {
      let i = 0;
      const books = [];
      while (i < 4) {
        books.push(new Book(randomWord(3), randomWord(3)));
        i++;
      }
      printToHTML(books.map(e => e.toString()).join('\n'));
      setTimeout(() => {
        const author = prompt('Search book by author:');
        printToHTML(books.filter(e => e.author.includes(author)).join('\n'));
      }, 300);
    }

    function sortByCost(sort = false) {
      const list = [
        { id: 1, name: 'iPhone 12', price: 10000000 },
        { id: 2, name: 'Samsung Galaxy S21', price: 9000000 },
        { id: 3, name: 'Google Pixel 5', price: 8000000 },
        { id: 4, name: 'OnePlus 9', price: 7500000 },
        { id: 5, name: 'Sony Xperia 1', price: 8500000 },
      ];
      printToHTML(
          `
          <button onclick="sortByCost(true)">Sort</button>
          ${list.join('\n')}
          `
      );
    }

    function printToHTML(obj) {
      document.getElementById('print-canvas').innerText = obj;
    }

    function clearCanvas() {
      document.getElementById('print-canvas').innerText = '';
    }

    function randomWord(length = 1) {
      let str = '', i = 0;
      while (i < length) {
        str += chars[Math.floor(Math.random() * 52)];
        i++;
      }
      return str;
    }

    function randomNumStr() {
      return chars[Math.floor(Math.random() * 10) + 52];
    }

    class Book {
      name;
      author;

      constructor(name, author) {
        this.name = name;
        this.author = author;
      }

      toString() {
        return `name: ${this.name}, author: ${this.author}`;
      }
    }
  </script>
</html>
